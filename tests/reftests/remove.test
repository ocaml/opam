N0REP0
### :::::: removal of partial dependencies (#4727)
### <pkg:a.1>
opam-version: "2.0"
### <pkg:b.1>
opam-version: "2.0"
### <pkg:c.1>
opam-version: "2.0"
depends: "a" | "b"
### opam switch create default --empty
### opam install a b c
The following actions will be performed:
=== install 3 packages
  - install a 1
  - install b 1
  - install c 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed a.1
-> installed b.1
-> installed c.1
Done.
### opam remove a --show
The following actions would be performed:
=== remove 1 package
  - remove    a 1
=== recompile 1 package
  - recompile c 1 [uses a]
### opam remove --auto --show
Nothing to do.
### opam remove a --auto --show
The following actions would be performed:
=== remove 1 package
  - remove    a 1
=== recompile 1 package
  - recompile c 1 [uses a]
### :::::: message on removal of an unavailable package (#4890)
### <pkg:z.1>
opam-version: "2.0"
available: false
### <pkg:w.1>
opam-version: "2.0"
depends: "z"
### opam remove z
[NOTE] z is not installed.

Nothing to do.
### opam remove w
[NOTE] w is not installed.

Nothing to do.
### :::::: remove directory selection, with & without --force (#6570)
### <pkg:p.1>
opam-version: "2.0"
build: "pwd"
install: "pwd"
remove: "pwd"
### <pkg:n.1>
opam-version: "2.0"
build: "pwd"
install: "pwd"
remove: "pwd"
### OPAMVERBOSE=2
### :: remove installed package
### opam install p
The following actions will be performed:
=== install 1 package
  - install p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "build" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> compiled  p.1
Processing  3/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "install" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> installed p.1
Done.
### opam remove p
The following actions will be performed:
=== remove 1 package
  - remove p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/p.1
-> removed   p.1
Done.
### opam install p
The following actions will be performed:
=== install 1 package
  - install p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "build" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> compiled  p.1
Processing  3/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "install" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> installed p.1
Done.
### opam remove p --force
The following actions will be performed:
=== remove 1 package
  - remove p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/p.1
-> removed   p.1
Done.
### opam install p --inplace
The following actions will be performed:
=== install 1 package
  - install p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "build" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> compiled  p.1
Processing  3/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "install" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> installed p.1
Done.
### opam remove p --inplace
The following actions will be performed:
=== remove 1 package
  - remove p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/p.1
-> removed   p.1
Done.
### :: remove uninstalled package
### opam remove n
[NOTE] n is not installed.

Nothing to do.
### opam remove n --force
[NOTE] Forcing removal of (uninstalled) n.1
[n: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/n.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/n.1
-> removed   n.1
### opam remove n --force --inplace
[NOTE] Forcing removal of (uninstalled) n.1
[n: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/n.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/n.1
-> removed   n.1
### :: remove installed and uninstalled package
### opam install p
The following actions will be performed:
=== install 1 package
  - install p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "build" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> compiled  p.1
Processing  3/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "install" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> installed p.1
Done.
### opam remove n p
[NOTE] n is not installed.

The following actions will be performed:
=== remove 1 package
  - remove p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/p.1
-> removed   p.1
Done.
### opam install p
The following actions will be performed:
=== install 1 package
  - install p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "build" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> compiled  p.1
Processing  3/3: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "install" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/build/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/build/p.1
-> installed p.1
Done.
### opam remove n p --force
[NOTE] Forcing removal of (uninstalled) n.1
[n: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/n.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/n.1
-> removed   n.1
The following actions will be performed:
=== remove 1 package
  - remove p 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [p: pwd]
+ ${BASEDIR}/OPAM/opam-init/hooks/sandbox.sh "remove" "pwd" (CWD=${BASEDIR}/OPAM/default/.opam-switch/remove/p.1)
- ${BASEDIR}/OPAM/default/.opam-switch/remove/p.1
-> removed   p.1
Done.
### :: remove unknown package
### opam remove m
[ERROR] No package named m found.
'${OPAM} remove m' failed.
# Return code 5 #
### opam remove m --force
[ERROR] No package named m found.
'${OPAM} remove m --force' failed.
# Return code 5 #
